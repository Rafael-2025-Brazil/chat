<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chat Simples</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      background: #111;
      color: #fff;
    }
    #name-page, #chat-page {
      display: none;
      padding: 20px;
    }
    #chat-box {
      height: 300px;
      overflow-y: auto;
      background: #222;
      padding: 10px;
      border-radius: 5px;
      margin-bottom: 10px;
    }
    input, button {
      padding: 10px;
      margin-top: 10px;
      font-size: 16px;
      border-radius: 5px;
      border: none;
    }
    input {
      width: 80%;
    }
    button {
      background-color: #2ecc71;
      color: #fff;
      cursor: pointer;
    }
    button:hover {
      background-color: #27ae60;
    }
    #admin-panel {
      margin-top: 30px;
      background: #333;
      padding: 10px;
      border-radius: 5px;
    }
  </style>
</head>
<body onload="carregarPerfil()">

  <!-- PÃ¡gina de login -->
  <div id="name-page">
    <h2>Digite seu nome para entrar no chat</h2>
    <input type="text" id="username" placeholder="Seu nome" />
    <button onclick="confirmarNome()">Entrar</button>
    <p id="name-error" style="color: red;"></p>
  </div>

  <!-- PÃ¡gina do chat -->
  <div id="chat-page">
    <h2>OlÃ¡, <span id="user-label"></span>!</h2>
    <div id="chat-box"></div>
    <input type="text" id="mensagem" placeholder="Digite uma mensagem" />
    <button onclick="enviarMensagem()">Enviar</button>

    <!-- Painel Admin -->
    <div id="admin-panel" style="display:none;">
      <h3>ðŸ›  Painel Admin</h3>
      <input type="text" id="alvo" placeholder="Nome para aÃ§Ã£o" />
      <button onclick="banirNome()">Banir</button>
      <button onclick="suspenderNome()">Suspender (1 min)</button>
      <button onclick="adicionarAdmin()">Tornar Admin</button>
    </div>
  </div>

  <script>
    let nomeUsuario = "";
    let mensagens = [];
    let nomesUsados = [];
    let admins = ["Rafael"]; // vocÃª Ã© admin por padrÃ£o
    let banidos = [];
    let suspensoes = {};

    function carregarPerfil() {
      try {
        const perfil = JSON.parse(localStorage.getItem("perfilUsuario"));
        if (perfil && !banidos.includes(perfil.nome)) {
          if (suspensoes[perfil.nome] && Date.now() < suspensoes[perfil.nome]) {
            alert("VocÃª estÃ¡ suspenso temporariamente.");
            return;
          }
          nomeUsuario = perfil.nome;
          if (!nomesUsados.includes(nomeUsuario)) {
            nomesUsados.push(nomeUsuario);
          }
          mostrarChat();
        } else {
          document.getElementById("name-page").style.display = "block";
        }
      } catch (e) {
        document.getElementById("name-page").style.display = "block";
      }
    }

    function confirmarNome() {
      const nome = document.getElementById("username").value.trim();

      if (!nome) {
        document.getElementById("name-error").innerText = "Digite um nome.";
        return;
      }

      if (nomesUsados.includes(nome) || banidos.includes(nome)) {
        document.getElementById("name-error").innerText = "Nome jÃ¡ usado ou banido.";
        return;
      }

      nomeUsuario = nome;
      nomesUsados.push(nome);
      salvarPerfil(nome);
      mostrarChat();
    }

    function mostrarChat() {
      document.getElementById("name-page").style.display = "none";
      document.getElementById("chat-page").style.display = "block";
      document.getElementById("user-label").innerText = nomeUsuario;

      if (admins.includes(nomeUsuario)) {
        document.getElementById("admin-panel").style.display = "block";
      }

      atualizarChat();
      setInterval(atualizarChat, 3000);
    }

    function salvarPerfil(nome) {
      const perfil = { nome: nome };
      localStorage.setItem("perfilUsuario", JSON.stringify(perfil));
    }

    function enviarMensagem() {
      const msg = document.getElementById("mensagem").value.trim();
      if (!msg) return;

      mensagens.push({ nome: nomeUsuario, texto: msg });
      document.getElementById("mensagem").value = "";
      atualizarChat();
    }

    function atualizarChat() {
      const caixa = document.getElementById("chat-box");
      caixa.innerHTML = "";
      mensagens.forEach(m => {
        const p = document.createElement("p");
        p.innerHTML = `<strong>${m.nome}:</strong> ${m.texto}`;
        caixa.appendChild(p);
      });
      caixa.scrollTop = caixa.scrollHeight;
    }

    function banirNome() {
      const alvo = document.getElementById("alvo").value.trim();
      if (alvo && !banidos.includes(alvo)) {
        banidos.push(alvo);
        alert(`${alvo} foi banido.`);
      }
    }

    function suspenderNome() {
      const alvo = document.getElementById("alvo").value.trim();
      if (alvo) {
        suspensoes[alvo] = Date.now() + 60000;
        alert(`${alvo} estÃ¡ suspenso por 1 minuto.`);
      }
    }

    function adicionarAdmin() {
      const alvo = document.getElementById("alvo").value.trim();
      if (alvo && !admins.includes(alvo)) {
        admins.push(alvo);
        alert(`${alvo} agora Ã© admin.`);
      }
    }
  </script>
</body>
</html>
